(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{524:function(n,o,e){"use strict";e.r(o);var t=e(6),i=Object(t.a)({},(function(){var n=this,o=n.$createElement,e=n._self._c||o;return e("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[e("p",[n._v("![Uploading 楼层效果_023685.gif . . .]\n"),e("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-e21fb2a272d96323.gif?imageMogr2/auto-orient/strip",alt:"模拟百度搜索下拉提示.gif"}})]),n._v(" "),e("p",[n._v("###引入下拉提示数据")]),n._v(" "),e("ul",[e("li",[n._v("要模拟百度搜索的下拉提示，首先我们需要的就是百度搜索下拉框的借口：\n"),e("code",[n._v("https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd=你&cb=baidu")])]),n._v(" "),e("li",[n._v("链接地址对应的信息就是一个调用的函数：\n"),e("code",[n._v('baidu({q:"你",p:false,s:["你到底有没有爱过我","你是我的小苹果","你是我的眼","你不知道的事","你懂的","你是男的我也爱","你好","逆战","你是我兄弟","你懂的网站"]});')])])]),n._v(" "),e("ul",[e("li",[n._v("通过调整链接中"),e("code",[n._v("?wd=")]),n._v("之后的关键词，我们可以获得其他的搜索提示。")]),n._v(" "),e("li",[n._v("修改"),e("code",[n._v("&cb=")]),n._v("之后的内容,可以更换调用的函数名。")]),n._v(" "),e("li",[n._v("根据这些，我们可以将这个链接通过"),e("code",[n._v("<script>")]),n._v("的"),e("code",[n._v("src")]),n._v("属性来引入;即这个调用的函数为 html 的一部分。")]),n._v(" "),e("li",[n._v("最后，只要我们创建对应的函数，就可以使用里面的数据;")])]),n._v(" "),e("p",[n._v("###JSONP\n这种引入数据的方式，我们称为 jsonp"),e("code",[n._v("[json with padding]")]),n._v("。一个非官方的协议，通过 javascript callback 的形式，实现跨域访问。")]),n._v(" "),e("ul",[e("li",[e("strong",[n._v("跨域")]),n._v("\n为什么会出现跨域？因为浏览器的"),e("code",[n._v("【同源策略】")]),n._v("。")]),n._v(" "),e("li",[e("strong",[n._v("同源策略")])])]),n._v(" "),e("ol",[e("li",[e("code",[n._v("【同源策略】")]),n._v("是浏览器的一种约定，它是浏览器的核心，也是最基本的安全功能。")]),n._v(" "),e("li",[n._v("它规定了浏览器在"),e("code",[n._v("不同端口")]),n._v("、"),e("code",[n._v("不同协议")]),n._v("、"),e("code",[n._v("不同域名")]),n._v("等多种情况下不能互相通信，即一个域名只能获取自身域名下的信息。")])]),n._v(" "),e("ul",[e("li",[e("strong",[n._v("解决跨域的方式")]),n._v("：\n除了 jsonp 之外，还可以让"),e("code",[n._v("后端代理（因为后端不存在跨域）")]),n._v("以及"),e("code",[n._v("flash+xml")]),n._v("的方式。")])]),n._v(" "),e("p",[n._v("####还有几点需要注意的是")]),n._v(" "),e("ol",[e("li",[n._v("我们使用的键盘弹起事件，每次弹起时都会创建一个"),e("code",[n._v("<script>")]),n._v("，这就需要我们将这些节点都删除。")]),n._v(" "),e("li",[n._v("输入框以及数据不为空时，我们才将得到的数据用字符串拼接的方式输入到 html 页面中。")]),n._v(" "),e("li",[e("code",[n._v("可能是只有下拉的数据请求的缘故，感觉速度比百度的快许多")])])]),n._v(" "),e("p",[n._v("最后奉上页面源码："),e("code",[n._v("（以上仅是分享，如有任何问题，请告知删除）")])]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\"/>\n<title>百度好几下,你才知道!</title>\n<style type=\"text/css\">\n    * {\n        margin: 0;\n        padding: 0;\n    }\n    img {\n        border: 0;\n    }\n    ol, ul, li {\n        list-style: none;\n    }\n    body{font-family:'microsoft yahei';overflow:hidden;}\n    #baidu{margin:0 auto;width:641px;position: relative;min-height:293px;}\n    #baidu .logo{text-align: center;position:absolute;bottom:40px;width:100%;height: 181px;}\n    #baidu .logo img{margin:33px auto 0 auto;}\n    #baidu form{position:absolute;bottom:0;}\n    #baidu input{float: left;outline:none;}\n    #baidu .search{width:535px;height:40px;padding:0 10px;font-size:14px;border:1px solid #ccc;box-sizing:border-box;}\n    #baidu .hover{border:1px solid #999;}\n    #baidu .focus{border:1px solid #38f;}\n    #baidu .btn{width: 102px;height: 40px;border:0;background:#3388FF;color:#fff;font-size:14px;cursor:pointer;}\n    #baidu ul{width:535px;border:1px solid #999;font-size:12px;box-sizing:border-box;display: none;position:absolute;top:39px;}\n    #baidu ul li{}\n    #baidu ul li a{display: block;text-decoration:none;color:#333;padding:5px 10px;}\n    #baidu ul li a:hover{background:#eee;}\n</style>\n</head>\n<body>\n    <div id=\"baidu\">\n        <div class=\"logo\">\n            ![](https://ss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1_31bdc765.png)\n        </div>\n        <form>\n            <input type=\"text\" class=\"search\">\n            <input type=\"button\" value=\"百度好几下\" class=\"btn\">\n            <ul id=\"select\">\n            </ul>\n        </form>\n    </div>\n    <script>\n        var oBaidu=document.getElementById('baidu');\n        var oSearch=oBaidu.getElementsByTagName('input')[0];\n        var oBtn=oBaidu.getElementsByTagName('input')[1];\n        var oUl=document.getElementById('select');\n        function baidu(data){\n             var str='';\n            if(oSearch.value!='' && data.s.length!=0){\n            //输入框以及数据不为空时执行。\n                for (var i = 0; i < data.s.length; i++) {\n                    str+='<li><a href=\"https://www.baidu.com/s?ie=utf-8&f=3&rsv_bp=1&rsv_idx=1&tn=baidu&wd='+data.s[i]+'\">'+data.s[i]+'</a></li>';\n                };\n                oUl.innerHTML=str;\n                oUl.style.display='block';\n                var aLi=oUl.getElementsByTagName('li');\n                tab(aLi,data.s.length)\n            }else{\n                oUl.style.display='none';\n            }\n        }\n        oSearch.onmouseover=function(){\n            oSearch.className='search hover';\n        }\n        oSearch.onmouseout=function(){\n            oSearch.className='search';\n        }\n        oSearch.onfocus=function(){\n            oSearch.style.border='1px solid #38f';\n            if(oSearch.value!=''){\n                oUl.style.display='block';\n            }\n        }\n        document.onclick=function(){\n            oSearch.style.border='';\n            oUl.style.display='none';\n        }\n        oSearch.onclick=function(ev){\n            var ev=ev||window.event;\n            ev.cancelBubble=true;\n        }\n        oSearch.onkeyup=function(ev){\n            var oScript=document.createElement('script');\n            oScript.src='https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd='+oSearch.value+'&cb=baidu';\n            document.body.appendChild(oScript);\n            var aScript=document.getElementsByTagName('script');\n            for (var i = 0; i < aScript.length; i++) {\n            //删除之前创建的全部script节点;\n                    document.body.removeChild(aScript[i]);\n            };\n            var ev=ev||window.event;\n            if(ev.keyCode==13){//输入框回车搜索;\n                oBtn.onclick();\n            };\n        }\n        oBtn.onclick=function(){//点击搜索;\n            location.href='https://www.baidu.com/s?ie=utf-8&f=3&rsv_bp=1&rsv_idx=1&tn=baidu&wd='+oSearch.value;\n        }\n        oSearch.focus();//默认输入框选中;\n    <\/script>\n</body>\n</html>\n")])])])])}),[],!1,null,null,null);o.default=i.exports}}]);
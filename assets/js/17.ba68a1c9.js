(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{520:function(a,t,i){"use strict";i.r(t);var e=i(7),s=Object(e.a)({},(function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[i("p",[a._v("在 Centos 中安装 Jenkins 完成后，还需要下载插件")]),a._v(" "),i("h2",{attrs:{id:"cha-jian-xia-zai"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#cha-jian-xia-zai"}},[a._v("#")]),a._v(" 插件下载")]),a._v(" "),i("p",[a._v("下载"),i("code",[a._v("nodejs plugin")]),a._v("、"),i("code",[a._v("github plugin")])]),a._v(" "),i("h2",{attrs:{id:"xi-tong-she-zhi"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#xi-tong-she-zhi"}},[a._v("#")]),a._v(" 系统设置")]),a._v(" "),i("p",[a._v("依次打开 系统管理 >> 系统设置")]),a._v(" "),i("h3",{attrs:{id:"jenkinslocation"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#jenkinslocation"}},[a._v("#")]),a._v(" "),i("strong",[a._v("Jenkins Location")])]),a._v(" "),i("div",{staticClass:"language-bash extra-class"},[i("pre",{pre:!0,attrs:{class:"language-bash"}},[i("code",[i("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#Jenkins URL")]),a._v("\n"),i("span",{pre:!0,attrs:{class:"token number"}},[a._v("172.16")]),a._v(".142.129:8080   "),i("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#配置Jenkin的地址，在邮件中显示")]),a._v("\n\n"),i("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#管理员邮件地址")]),a._v("\nxxxxxxxx@email.com\n")])])]),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-66d73f32710fde4d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000",alt:"管理员邮件地址"}})]),a._v(" "),i("h3",{attrs:{id:"you-jian-tong-zhi"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#you-jian-tong-zhi"}},[a._v("#")]),a._v(" "),i("strong",[a._v("邮件通知")])]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-53359e70496d79f1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000",alt:"邮件通知"}})]),a._v(" "),i("p",[i("strong",[a._v("注意")]),a._v("：这里的邮箱账号最好与上方填写的系统管理员邮箱相同，密码是生成的授权码；在下方输入另外的邮箱，点击"),i("code",[a._v("Test configuration")]),a._v("测试通过即可。")]),a._v(" "),i("h3",{attrs:{id:"github"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#github"}},[a._v("#")]),a._v(" github")]),a._v(" "),i("p",[a._v("点击右边的问号，展开说明。")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-ccc269b3f14b8d66.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000",alt:"GitHub Servers"}})]),a._v(" "),i("p",[a._v("点击  "),i("a",{attrs:{href:"https://github.com/settings/tokens/new",target:"_blank",rel:"noopener noreferrer"}},[a._v("personal access token"),i("OutboundLink")],1),a._v(",创建一个 token。")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-31754e52a10666a0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000",alt:"github token"}})]),a._v(" "),i("p",[a._v("复制 token")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-fca75ccbac8c3938.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000",alt:"生成的token"}})]),a._v(" "),i("p",[a._v("再返回 JenKins 配置页面，点击 Add 按钮")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-04c9180861704f6f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000",alt:"添加一个GitHub证书"}})]),a._v(" "),i("h3",{attrs:{id:"gitplugin"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#gitplugin"}},[a._v("#")]),a._v(" Git plugin")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-3055f58d2d0fb136.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"输入你的github用户名以及邮箱"}})]),a._v(" "),i("h2",{attrs:{id:"pei-zhi-git"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#pei-zhi-git"}},[a._v("#")]),a._v(" 配置 git")]),a._v(" "),i("p",[a._v("系统管理 >> 全局工具配置")]),a._v(" "),i("h3",{attrs:{id:"gitinstallations"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#gitinstallations"}},[a._v("#")]),a._v(" Git installations")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-6f3b38f80726b1e8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700",alt:"勾选自动安装"}})]),a._v(" "),i("h3",{attrs:{id:"nodejs"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#nodejs"}},[a._v("#")]),a._v(" NodeJs")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-4def91fd5f6d40b3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"NodeJs"}}),a._v("\n这里的 Node 版本选择与你项目相同的。")]),a._v(" "),i("hr"),a._v(" "),i("h2",{attrs:{id:"chuang-jian-xiang-mu"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#chuang-jian-xiang-mu"}},[a._v("#")]),a._v(" 创建项目")]),a._v(" "),i("ol",[i("li",[i("p",[a._v("创建一个自由风格的项目\n"),i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-63527b1b41381a3d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000",alt:"自由风格的项目"}})])]),a._v(" "),i("li",[i("p",[a._v("配置 github 项目地址\n"),i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-2a58d155f76e8c60.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000",alt:"github项目地址"}})])]),a._v(" "),i("li",[i("p",[a._v("配置项目 git 地址\n"),i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-25d8b247ccacda37.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000",alt:"git地址"}})])]),a._v(" "),i("li",[i("p",[a._v("点击 Add,添加一个 github 账号\n"),i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-c873ee5112fd89cf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000",alt:"添加一个github账号"}})])]),a._v(" "),i("li",[i("p",[a._v("选择 GitHub hook trigger for GITScm polling\n"),i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-a7ed23817c3f2743.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000",alt:"构建触发器"}})])]),a._v(" "),i("li",[i("p",[a._v("配置构建环境，选择一个添加过的 node\n"),i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-176e6c3faa5d8476.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000",alt:"构建环境"}})])]),a._v(" "),i("li",[i("p",[a._v("添加构建步骤：选择 execute shell 来执行 node 命令\n"),i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-4034a3c67c62270e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000",alt:"image.png"}}),a._v("\n这里的命令跟你项目相同就行，我这里是多了一层目录，所以需要"),i("code",[a._v("cd client")]),a._v(" "),i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-bbbae8b8d3d14cb3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000",alt:"image.png"}})])]),a._v(" "),i("li",[i("p",[a._v('再添加构建步骤：Set build status to "pending" on GitHub commit\n'),i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-e1416b422f17139a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000",alt:"image.png"}})])]),a._v(" "),i("li",[i("p",[a._v("添加构建后的操作：E-mail Notification 以及 Set build status on GitHub commit [deprecated]\n"),i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-bced30aaf937ea3a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000",alt:"邮箱"}}),a._v("\n保存。End")])]),a._v(" "),i("li",[i("p",[a._v("最后在 github 项目中，打开 settting")])])]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-6ea9e8475ad657c4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000",alt:"Add service"}})]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-7b428547bfe0c7af.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000",alt:"配置webhook地址"}})]),a._v(" "),i("p",[a._v("这里的就不得不介绍个软件："),i("a",{attrs:{href:"https://natapp.cn/",target:"_blank",rel:"noopener noreferrer"}},[a._v("NatApp"),i("OutboundLink")],1),a._v("\n因为是 Mac 系统装的虚拟机，所以直接填写内网地址，github 肯定 post 不了。\n下载这个软件后，在同目录下添加 config.ini 文件")]),a._v(" "),i("div",{staticClass:"language-bash extra-class"},[i("pre",{pre:!0,attrs:{class:"language-bash"}},[i("code",[i("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#将本文件放置于natapp同级目录 程序将读取 [default] 段")]),a._v("\n"),i("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#在命令行参数模式如 natapp -authtoken=xxx 等相同参数将会覆盖掉此配置")]),a._v("\n"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("default"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),i("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("authtoken")]),i("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("xxxxxxxxx    "),i("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#对应一条隧道的authtoken")]),a._v("\n"),i("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("clienttoken")]),i("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("                "),i("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#对应客户端的clienttoken,将会忽略authtoken,若无请留空,")]),a._v("\n"),i("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("logto")]),i("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("none                  "),i("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#log 日志文件, 可以是 none 代表不记录 或者 stdout 代表直接屏幕输出 ,默认为none")]),a._v("\n"),i("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("loglevel")]),i("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("DEBUG              "),i("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#日志等级 DEBUG, INFO, WARNING, ERROR 默认为 DEBUG")]),a._v("\n"),i("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("http_proxy")]),i("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("                 "),i("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#代理设置 如 http://http://10.123.10.10:3128")]),a._v("\n")])])]),i("p",[a._v("authtoken 是你注册后，申请通道得来的，免费的就行。")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-877e431e1f8706a2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000",alt:"image.png"}})]),a._v(" "),i("p",[a._v("本地地址：输入 centos 的 ip\n本地端口：jenkins 默认 8080；")]),a._v(" "),i("p",[a._v("双击 natapp")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-905479f752bf88d3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"内网端口映射到外网域名了"}})]),a._v(" "),i("p",[a._v("最后 push 代码，可以看到触发构建")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/912092-72d4829390e9043a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000",alt:"构建中"}})]),a._v(" "),i("p",[a._v("如果出现问题，这里也能看到。\n根据错误信息解决问题。")])])}),[],!1,null,null,null);t.default=s.exports}}]);